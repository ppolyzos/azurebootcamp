@using System.Linq
@model bootcamp.Models.LocationInfo
@{
    if (Model != null && Model.Location != null)
    {
        ViewBag.Location = Model.Location.Name;
    }

    IEnumerable<Speaker> speakers = null;
    if (Model != null && Model.Tracks != null)
    {
        speakers = Model.Tracks.SelectMany(x => x.Sessions.Select(y => y.Speaker));
    }
}

@section Menu{

    <cache expires-after="@TimeSpan.FromHours(1)">
        @if (Model != null && Model.Tracks != null)
        {
            <li>
                <a class="page-scroll" href="#agenda">agenda</a>
            </li>
            if (speakers.Any(x => x != null))
            {
                <li>
                    <a class="page-scroll" href="#speakers">speakers</a>
                </li>
            }
        }
        @if (Model != null && Model.Sponsors != null)
        {
            <li>
                <a class="page-scroll" href="#sponsors">sponsors</a>
            </li>
        }
        @if (Model != null && Model.Prizes != null)
        {
            <li>
                <a class="page-scroll" href="#giveaways">SWAGs</a>
            </li>
        }
        @if (Model != null && Model.Social != null && Model.Organizers != null)
        {
            <li>
                <a class="page-scroll" href="#contact">contact</a>
            </li>
        }
        @if (Model != null && Model.Location != null)
        {
            <li>
                <a class="page-scroll" href="#locate">locate</a>
            </li>
        }

        @if (Model != null && Model.Campaigns != null)
        {
            foreach (var item in Model.Campaigns)
            {
                <li>
                    <a href="@item.Link" target="_blank">@item.Text</a>
                </li>
            }

        }
    </cache>
}

@section Callout{
    <cache expires-after="@TimeSpan.FromHours(1)">
        @if (Model?.Callout != null && Model.Callout.Any())
        {
            <ul class="callout">
                @foreach (var call in Model.Callout)
                {
                    <li>
                        <a href="@call.Link" class="btn btn-@call.Type">@call.Text</a>
                        @if (!string.IsNullOrEmpty(call.Info))
                        {
                            <span class="info">@call.Info</span>
                        }
                    </li>
                }
            </ul>
        }
    </cache>
}

@if (Model != null && Model != null && Model.Tracks != null)
{
    <cache expires-after="@TimeSpan.FromHours(1)">
        @await Html.PartialAsync("_Agenda", Model.Tracks)
        @if (speakers != null && speakers.Any())
        {
            @await Html.PartialAsync("_Speakers", speakers)
        }
    </cache>

}
@if (Model?.Sponsors != null)
{
    <cache expires-after="@TimeSpan.FromHours(1)">
        @await Html.PartialAsync("_Sponsors", Model.Sponsors)
    </cache>
}
@if (Model?.Prizes != null)
{
    <cache expires-after="@TimeSpan.FromHours(1)">
        @await Html.PartialAsync("_Prizes", Model.Prizes)
    </cache>
}
@if (Model?.Social != null && Model.Organizers != null)
{
    <cache expires-after="@TimeSpan.FromHours(1)">
        @await Html.PartialAsync("_Contact", Model)
    </cache>
}

@if (Model?.Location != null)
{
    <cache expires-after="@TimeSpan.FromHours(1)">
        @await Html.PartialAsync("_Map", Model.Location)
    </cache>
}
